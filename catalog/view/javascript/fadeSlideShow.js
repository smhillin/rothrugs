jQuery.fn.fadeSlideShow=function(e){return this.each(function(){settings=jQuery.extend({width:"100%",height:782,speed:"slow",interval:4e3,PlayPauseElement:"fssPlayPause",PlayText:"",PauseText:"",NextElement:"fssNext",NextElementText:"Next >",PrevElement:"fssPrev",PrevElementText:"< Prev",ListElement:"fssList",ListLi:"fssLi",ListLiActive:"fssActive",addListToId:false,allowKeyboardCtrl:false,autoplay:true},e);jQuery(this).css({width:settings.width,height:settings.height,position:"relative",overflow:"hidden"});jQuery("> *",this).css({position:"absolute",width:settings.width,height:settings.height});var t=jQuery("> *",this).length;t=t-1;var n=t;var r=jQuery("> *",this);var i=this;var s=false;var o=function(){s=setInterval(function(){r.eq(n).fadeOut(settings.speed);if(settings.ListElement){var e=t-n+1;if(e>t){e=0}jQuery("#"+settings.ListElement+" li").removeClass(settings.ListLiActive);jQuery("#"+settings.ListElement+" li").eq(e).addClass(settings.ListLiActive)}if(n<=0){r.fadeIn(settings.speed);n=t}else{n=n-1}},settings.interval);if(settings.PlayPauseElement){jQuery("#"+settings.PlayPauseElement).html(settings.PauseText)}};var u=function(){clearInterval(s);s=false;if(settings.PlayPauseElement){jQuery("#"+settings.PlayPauseElement).html(settings.PlayText)}};var a=function(e){if(e<0){e=t}else if(e>t){e=0}if(e>=n){jQuery("> *:lt("+(e+1)+")",i).fadeIn(settings.speed)}else if(e<=n){jQuery("> *:gt("+e+")",i).fadeOut(settings.speed)}n=e;if(settings.ListElement){jQuery("#"+settings.ListElement+" li").removeClass(settings.ListLiActive);jQuery("#"+settings.ListElement+" li").eq(t-e).addClass(settings.ListLiActive)}};if(settings.ListElement){var f=0;var l="";while(f<=t){if(f==0){l=l+'<li class="'+settings.ListLi+f+" "+settings.ListLiActive+'"><a href="#">'+(f+1)+"</a></li>"}else{l=l+'<li class="'+settings.ListLi+f+'"><a href="#">'+(f+1)+"</a></li>"}f++}var c='<ul id="'+settings.ListElement+'">'+l+"</ul>";if(settings.addListToId){jQuery("#"+settings.addListToId).append(c)}else{jQuery(this).after(c)}jQuery("#"+settings.ListElement+" a").bind("click",function(){var e=jQuery("#"+settings.ListElement+" a").index(this);u();var n=t-e;a(n);return false})}if(settings.PlayPauseElement){if(!jQuery("#"+settings.PlayPauseElement).css("display")){jQuery(this).after('<a href="#" id="'+settings.PlayPauseElement+'"></a>')}if(settings.autoplay){jQuery("#"+settings.PlayPauseElement).html(settings.PauseText)}else{jQuery("#"+settings.PlayPauseElement).html(settings.PlayText)}jQuery("#"+settings.PlayPauseElement).bind("click",function(){if(s){u()}else{o()}return false})}if(settings.NextElement){if(!jQuery("#"+settings.NextElement).css("display")){jQuery(this).after('<a href="#" id="'+settings.NextElement+'">'+settings.NextElementText+"</a>")}jQuery("#"+settings.NextElement).bind("click",function(){nextSlide=n-1;u();a(nextSlide);return false})}if(settings.PrevElement){if(!jQuery("#"+settings.PrevElement).css("display")){jQuery(this).after('<a href="#" id="'+settings.PrevElement+'">'+settings.PrevElementText+"</a>")}jQuery("#"+settings.PrevElement).bind("click",function(){prevSlide=n+1;u();a(prevSlide);return false})}if(settings.allowKeyboardCtrl){jQuery(document).bind("keydown",function(e){if(e.which==39){var t=n-1;u();a(t)}else if(e.which==37){var r=n+1;u();a(r)}else if(e.which==32){if(s){u()}else{o()}}})}if(settings.autoplay){o()}else{s=false}})}